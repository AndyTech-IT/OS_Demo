using System.Security.Cryptography;

namespace OS_Demo
{
    public partial class Explorer : Form
    {
        IDE_From IDE;
        Open_OS_File_Dialoge ofd;
        public Explorer()
        {
            InitializeComponent();
            OS.Init_Disk(new OS_File[]
            {
                new OS_File("Hello.asm", 2,
                new byte[] { 115, 101, 116, 32, 82, 49, 32, 50, 52, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 48, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 49, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 49, 10, 115, 101, 116, 32, 82, 49, 32, 49, 53, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 50, 10, 10, 115, 101, 116, 32, 82, 49, 32, 34, 72, 101, 108, 108, 111, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 51, 10, 115, 101, 116, 32, 82, 49, 32, 34, 32, 87, 111, 114, 108, 100, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 56, 10, 115, 101, 116, 32, 82, 49, 32, 34, 32, 61, 61, 32, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 69, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 50, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 50, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 51, 10, 10, 115, 101, 116, 32, 82, 49, 32, 50, 48, 50, 51, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 52, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 49, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 54, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 55, 10, 10, 115, 101, 116, 32, 82, 49, 32, 34, 33, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 56, 10, 10, 109, 115, 103, 32, 48, 10, 101, 120, 116, 32, 48 }
                ),
                new OS_File("Hello.exe", 1,
                new byte[] { 14, 65, 24, 5, 65, 0, 14, 65, 1, 5, 65, 1, 14, 65, 15, 5, 65, 2, 14, 69, 72, 101, 108, 108, 111, 5, 65, 3, 14, 70, 32, 87, 111, 114, 108, 100, 5, 65, 8, 14, 68, 32, 61, 61, 32, 5, 65, 14, 14, 65, 2, 5, 65, 18, 5, 65, 19, 14, 66, 231, 7, 5, 65, 20, 14, 65, 1, 5, 65, 22, 5, 65, 23, 14, 65, 33, 5, 65, 24, 14, 65, 0, 1, 64, 0, 1, 0 }
                ),
                new("Echo.asm", 2,
                new byte[] { 115, 101, 116, 32, 82, 49, 32, 50, 52, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 48, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 49, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 49, 10, 115, 101, 116, 32, 82, 49, 32, 49, 53, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 50, 10, 10, 115, 101, 116, 32, 82, 49, 32, 34, 72, 101, 108, 108, 111, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 51, 10, 115, 101, 116, 32, 82, 49, 32, 34, 32, 87, 111, 114, 108, 100, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 56, 10, 115, 101, 116, 32, 82, 49, 32, 34, 32, 61, 61, 32, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 48, 69, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 50, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 50, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 51, 10, 10, 115, 101, 116, 32, 82, 49, 32, 50, 48, 50, 51, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 52, 10, 10, 10, 115, 101, 116, 32, 82, 49, 32, 49, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 54, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 55, 10, 10, 115, 101, 116, 32, 82, 49, 32, 34, 33, 34, 10, 119, 109, 32, 32, 82, 49, 32, 48, 120, 49, 56, 10, 10, 115, 101, 116, 32, 82, 49, 32, 48, 10, 109, 115, 103, 32, 82, 49, 10, 101, 120, 116, 32, 48 }
                ),
                new("Echo.exe", 1,
                new byte[] { 14, 65, 24, 5, 65, 0, 14, 65, 1, 5, 65, 1, 14, 65, 15, 5, 65, 2, 14, 69, 72, 101, 108, 108, 111, 5, 65, 3, 14, 70, 32, 87, 111, 114, 108, 100, 5, 65, 8, 14, 68, 32, 61, 61, 32, 5, 65, 14, 14, 65, 2, 5, 65, 18, 5, 65, 19, 14, 66, 231, 7, 5, 65, 20, 14, 65, 1, 5, 65, 22, 5, 65, 23, 14, 65, 33, 5, 65, 24, 14, 65, 0, 1, 64, 0, 1, 0 }
                ),
                new("Factorial.asm", 2,
                new byte[] { 115, 101, 116, 32, 82, 49, 32, 48, 120, 49, 48, 95, 48, 49, 95, 49, 50, 10, 115, 101, 116, 32, 82, 50, 32, 34, 69, 110, 116, 101, 114, 34, 10, 115, 101, 116, 32, 82, 51, 32, 34, 32, 116, 104, 101, 32, 34, 10, 115, 101, 116, 32, 82, 52, 32, 34, 110, 117, 109, 98, 101, 114, 34, 10, 119, 109, 32, 82, 49, 32, 48, 10, 119, 109, 32, 82, 50, 32, 51, 10, 119, 109, 32, 82, 51, 32, 56, 10, 119, 109, 32, 82, 52, 32, 49, 51, 10, 10, 115, 101, 116, 32, 82, 49, 32, 48, 10, 110, 117, 109, 32, 82, 49, 32, 82, 49, 10, 10, 114, 109, 32, 82, 49, 32, 48, 10, 115, 101, 116, 32, 67, 88, 32, 49, 10, 115, 101, 116, 32, 82, 50, 32, 49, 10, 115, 101, 116, 32, 82, 51, 32, 49, 10, 115, 101, 116, 32, 82, 52, 32, 49, 10, 115, 101, 116, 32, 82, 53, 32, 54, 51, 10, 10, 109, 117, 108, 32, 82, 50, 32, 82, 51, 10, 97, 100, 100, 32, 82, 51, 32, 82, 52, 10, 106, 99, 102, 32, 82, 53, 32, 82, 49, 10, 10, 115, 101, 116, 32, 82, 49, 32, 48, 120, 48, 56, 95, 48, 50, 95, 48, 65, 10, 119, 109, 32, 82, 49, 32, 48, 10, 119, 109, 32, 82, 50, 32, 51, 10, 10, 115, 101, 116, 32, 82, 49, 32, 48, 10, 109, 115, 103, 32, 82, 49, 10, 101, 120, 116 }
                ),
                new("Factorial.exe", 1,
                new byte[] { 14, 68, 18, 1, 16, 0, 14, 85, 69, 110, 116, 101, 114, 14, 101, 32, 116, 104, 101, 32, 14, 118, 110, 117, 109, 98, 101, 114, 5, 65, 0, 5, 81, 3, 5, 97, 8, 5, 113, 13, 14, 65, 0, 3, 68, 4, 65, 0, 14, 33, 1, 14, 81, 1, 14, 97, 1, 14, 113, 1, 14, 129, 63, 28, 86, 26, 103, 12, 132, 14, 68, 10, 2, 8, 0, 5, 65, 0, 5, 81, 3, 14, 65, 0, 1, 64, 0 }
                )
            });
            ofd = new();
            IDE = new();
        }

        private void Form1_FormClosed(object sender, FormClosedEventArgs e)
        {
            OS.Stop();
        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            OS.Start();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            new Thread(delegate() 
            {
                try
                {
                    IDE.ShowDialog();
                }
                catch { }
            }).Start();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (ofd.ShowDialog(1) == DialogResult.OK)
            {
                OS.StartProcess(ofd.File_Name!);
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (ofd.ShowDialog() == DialogResult.OK)
            {
                if (MessageBox.Show($"Вы точно хотите удалить файл: {ofd.File_Name}?") == DialogResult.OK)
                    OS.Remove_File(ofd.File_Name!);
            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            if (ofd.ShowDialog() == DialogResult.OK)
            {
                byte[] data = OS.Read_DISK(ofd.File_Address!.Value * 256, ofd.File_Size!.Value);
                Clipboard.SetText($"new byte[] {{ {string.Join(", ", data)} }}");
            }
        }
    }
}